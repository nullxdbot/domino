<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Domino Score NullXD</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <link rel="stylesheet" href="css/style.css">
    
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0f1020">
    
    <link rel="icon" href="img/icon.png" type="image/png">
    <link rel="apple-touch-icon" href="img/icon.png">
</head>
<body>

    <div class="bg-gradient"></div>
    <canvas id="particles-canvas"></canvas>

    <div class="app-container">
        
        <header class="app-header">
            <div class="brand">
                <i class="fas fa-cubes"></i> DOMINO SCORE NULLXD
            </div>
            <div class="header-right">
                <div class="round-counter">
                    <i class="fas fa-repeat"></i> Ronde: <span id="roundCount">1</span>
                </div>
                <button class="btn-icon" onclick="toggleSettings()">
                    <i class="fas fa-cog"></i>
                </button>
            </div>
        </header>

        <!-- Selisih Skor Indicator -->
        <div class="score-difference" id="scoreDiff">
            <i class="fas fa-equals"></i> Seri
        </div>

        <main class="scoreboard" id="scoreboard">
            
            <div class="player-card p1" id="card-0">
                <div class="last-winner-badge" id="badge-0">
                    <i class="fas fa-trophy"></i> Menang Terakhir
                </div>
                <button class="quick-reset-btn" onclick="quickResetPlayer(0)" title="Reset skor pemain ini">
                    <i class="fas fa-redo"></i>
                </button>
                <div class="card-info">
                    <span class="player-label">TIM 1</span>
                    <div class="win-count"><i class="fas fa-crown"></i> <span id="win-0">0</span></div>
                </div>
                
                <div class="score-area" onclick="openCalculator(0)">
                    <span class="score-val" id="score-0">0</span>
                </div>

                <div class="remaining-text" id="remain-0">Kurang 101 lagi</div>

                <div class="history-container">
                    <div class="history-list" id="history-0"></div>
                </div>

                <div class="actions">
                    <button class="btn-action btn-minus" onclick="updateScore(0, -1)"><i class="fas fa-minus"></i></button>
                    <button class="btn-action btn-add" onclick="openCalculator(0)"><i class="fas fa-plus"></i></button>
                </div>
            </div>

            <div class="vs-divider">VS</div>

            <div class="player-card p2" id="card-1">
                <div class="last-winner-badge" id="badge-1">
                    <i class="fas fa-trophy"></i> Menang Terakhir
                </div>
                <button class="quick-reset-btn" onclick="quickResetPlayer(1)" title="Reset skor pemain ini">
                    <i class="fas fa-redo"></i>
                </button>
                <div class="card-info">
                    <span class="player-label">TIM 2</span>
                    <div class="win-count"><i class="fas fa-crown"></i> <span id="win-1">0</span></div>
                </div>
                
                <div class="score-area" onclick="openCalculator(1)">
                    <span class="score-val" id="score-1">0</span>
                </div>

                <div class="remaining-text" id="remain-1">Kurang 101 lagi</div>

                <div class="history-container">
                    <div class="history-list" id="history-1"></div>
                </div>

                <div class="actions">
                    <button class="btn-action btn-minus" onclick="updateScore(1, -1)"><i class="fas fa-minus"></i></button>
                    <button class="btn-action btn-add" onclick="openCalculator(1)"><i class="fas fa-plus"></i></button>
                </div>
            </div>
        </main>
    </div>

    <div class="overlay" id="calculatorOverlay" onclick="closeCalculatorOnOutside(event)">
        <div class="sheet-modal">
            <div class="calc-display-area">
                <span id="calcDisplay">0</span>
            </div>
            <div class="calc-grid">
                <button class="c-btn fn" onclick="clearCalc()">AC</button>
                <button class="c-btn fn" onclick="backspace()"><i class="fas fa-backspace"></i></button>
                <button class="c-btn op" onclick="appendOperator('/')">÷</button>
                <button class="c-btn op" onclick="appendOperator('*')">×</button>
                
                <button class="c-btn num" onclick="appendNumber('7')">7</button>
                <button class="c-btn num" onclick="appendNumber('8')">8</button>
                <button class="c-btn num" onclick="appendNumber('9')">9</button>
                <button class="c-btn op" onclick="appendOperator('-')">−</button>
                
                <button class="c-btn num" onclick="appendNumber('4')">4</button>
                <button class="c-btn num" onclick="appendNumber('5')">5</button>
                <button class="c-btn num" onclick="appendNumber('6')">6</button>
                <button class="c-btn op" onclick="appendOperator('+')">+</button>
                
                <button class="c-btn num" onclick="appendNumber('1')">1</button>
                <button class="c-btn num" onclick="appendNumber('2')">2</button>
                <button class="c-btn num" onclick="appendNumber('3')">3</button>
                <button class="c-btn submit tall" onclick="doneCalculator()">Done</button>
                
                <button class="c-btn num wide" onclick="appendNumber('0')">0</button>
                <button class="c-btn num" onclick="appendNumber('.')">.</button>
            </div>
        </div>
    </div>

    <div class="overlay" id="settingsOverlay" onclick="toggleSettings()">
        <div class="sheet-modal small">
            <div class="modal-header">
                <h3>Pengaturan</h3>
                <button onclick="toggleSettings()"><i class="fas fa-times"></i></button>
            </div>
            
            <div class="setting-row">
                <label>Tema</label>
                <div class="theme-picker">
                    <div class="t-circle t-blue active" onclick="setTheme('blue')"></div>
                    <div class="t-circle t-purple" onclick="setTheme('purple')"></div>
                    <div class="t-circle t-dark" onclick="setTheme('dark')"></div>
                </div>
            </div>

            <div class="setting-row">
                <label>Batas Poin Kalah</label>
                <input type="number" id="limitInput" value="101" onchange="updateLimit(this.value)">
            </div>

            <!-- Toggle Compact Mode -->
            <div class="setting-row">
                <label>
                    <input type="checkbox" id="compactToggle" onchange="toggleCompactMode()">
                    Mode Compact
                </label>
            </div>

            <div class="reset-actions">
                <button class="btn-action-settings btn-soft-reset" onclick="resetRound()">
                    <i class="fas fa-sync-alt"></i> Reset Skor (Ronde Baru)
                </button>
                <button class="btn-action-settings btn-hard-reset" onclick="hardReset()">
                    <i class="fas fa-trash-alt"></i> Hapus Semua Data
                </button>
            </div>

            <div class="dev-section">
                <div class="dev-divider"></div>
                <div class="dev-label">CONNECT WITH DEVELOPER</div>
                <div class="social-links-settings">
                    <a href="https://instagram.com/farrelauliairfealdo_" target="_blank" class="soc-btn-mini ig"><i class="fa-brands fa-instagram"></i></a>
                    <a href="https://tiktok.com/@farrel.aulia.irfealdo" target="_blank" class="soc-btn-mini tk"><i class="fa-brands fa-tiktok"></i></a>
                    <a href="https://t.me/farrelauliairfealdo" target="_blank" class="soc-btn-mini tg"><i class="fa-brands fa-telegram"></i></a>
                </div>
                <div class="dev-name-settings">Farrel Aulia Irfealdo</div>
            </div>
        </div>
    </div>

    <div class="overlay center-content" id="gameOverModal">
        <div class="winner-box">
            <div class="glow-icon"><i class="fas fa-trophy"></i></div>
            <h2 id="winnerName">Tim 1</h2>
            <p>MEMENANGKAN PERTANDINGAN</p>
            <div class="winner-score" id="finalScore">105</div>
            <button class="btn-primary" onclick="resetRound()">Lanjut Ronde Baru</button>
        </div>
    </div>

    <div class="overlay center-content" id="confirmModal">
        <div class="winner-box" style="padding: 30px; max-width: 320px;">
            <div class="glow-icon" style="color: #ff6b6b; font-size: 3rem; margin-bottom: 15px;"><i class="fas fa-exclamation-triangle"></i></div>
            <h3 style="margin-bottom: 10px;">Konfirmasi</h3>
            <p id="confirmMessage" style="color: #ccc; margin-bottom: 25px; font-size: 0.9rem;">Apakah anda yakin?</p>
            <div style="display: flex; gap: 10px; justify-content: center;">
                <button class="btn-action-settings" style="background: rgba(255,255,255,0.1); color: white;" onclick="closeConfirmModal()">Batal</button>
                <button class="btn-action-settings" style="background: #ef233c; color: white;" onclick="executeConfirm()">Ya, Lanjutkan</button>
            </div>
        </div>
    </div>

    <audio id="sfx-click" src="https://assets.mixkit.co/sfx/preview/mixkit-modern-technology-select-3124.mp3"></audio>
    <audio id="sfx-win" src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3"></audio>

    <script src="js/app.js"></script>

    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('sw.js').then(function(registration) {
                    console.log('ServiceWorker success: ', registration.scope);
                }, function(err) {
                    console.log('ServiceWorker failed: ', err);
                });
            });
        }
    </script>
</body>
</html>
